{% extends 'ecom/customer_base.html' %}
{% load static %}
{% block content %}

<style media="screen">
  /* Base styles */
  body, html {
    height: 100%;
    font-family: 'Poppins', sans-serif;
  }

  body {
    background-color: #f8f9fa;
  }

  /* Utility classes */
  .d-flex {
    display: flex;
  }

  .align-center {
    align-items: center;
  }

  .flex-centerY-centerX {
    justify-content: center;
    align-items: center;
  }

  /* Hero slider */
  .slider-container {
    height: 50vh;
    min-height: 400px;
    width: 100%;
    position: relative;
    overflow: hidden;
    text-align: center;
    margin-bottom: 30px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  }

  .menu {
    position: absolute;
    left: 0;
    z-index: 900;
    width: 100%;
    bottom: 20px;
  }

  .menu label {
    cursor: pointer;
    display: inline-block;
    width: 12px;
    height: 12px;
    background: rgba(255, 255, 255, 0.6);
    border-radius: 50px;
    margin: 0 .2em 1em;
    transition: all 0.3s ease;
  }

  .menu label:hover {
    background: #fff;
    transform: scale(1.2);
  }

  .slide {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 100%;
    z-index: 10;
    background-size: cover;
    background-position: center;
    transition: left 0s .75s;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .slide-content {
    background-color: rgba(0, 0, 0, 0.5);
    padding: 30px;
    border-radius: 8px;
    max-width: 600px;
    text-align: center;
    color: white;
    transform: translateY(50px);
    opacity: 0;
    transition: all 0.5s ease 0.3s;
  }

  [id^="slide"]:checked + .slide .slide-content {
    transform: translateY(0);
    opacity: 1;
  }

  [id^="slide"]:checked + .slide {
    left: 0;
    z-index: 100;
    transition: left .65s ease-out;
  }

  .slide-1 {
    background-image: url("{% static 'images/b2.webp' %}");
  }

  .slide-2 {
    background-image: url("{% static 'images/b4.webp' %}");
  }

  .slide-3 {
    background-image: url("{% static 'images/b3.webp' %}");
  }

  /* Category tabs */
  .category-tabs {
    display: flex;
    justify-content: center;
    margin-bottom: 30px;
    flex-wrap: wrap;
  }

  .category-tab {
    padding: 10px 20px;
    margin: 0 5px 10px;
    background-color: #fff;
    border: 2px solid #eee;
    border-radius: 30px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 600;
    color: #555;
  }

  .category-tab:hover, .category-tab.active {
    background-color: #3E454C;
    color: white;
    border-color: #3E454C;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }

  /* Search and filter bar */
  .search-filter-container {
    background-color: white;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    margin-bottom: 30px;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
  }

  .search-box {
    flex: 1;
    min-width: 250px;
    margin-right: 15px;
    margin-bottom: 10px;
    position: relative;
  }

  .search-box input {
    width: 100%;
    padding: 10px 15px 10px 40px;
    border: 1px solid #ddd;
    border-radius: 30px;
    font-size: 14px;
    transition: all 0.3s;
  }

  .search-box input:focus {
    border-color: #96b3ef;
    box-shadow: 0 0 0 3px rgba(150, 179, 239, 0.2);
    outline: none;
  }

  .search-box i {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: #aaa;
  }

  .filter-options {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
  }

  .filter-label {
    margin-right: 10px;
    font-weight: 600;
    color: #555;
  }

  .filter-select {
    padding: 8px 15px;
    border: 1px solid #ddd;
    border-radius: 4px;
    background-color: white;
    margin-right: 10px;
    cursor: pointer;
  }

  /* Product grid */
  .products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 25px;
    margin-bottom: 50px;
  }

  /* Product card */
  .product-card {
    background-color: white;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    position: relative;
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  .product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.15);
  }

  .product-image-container {
    position: relative;
    padding-top: 100%; /* 1:1 Aspect Ratio */
    overflow: hidden;
    background-color: #f5f5f5;
  }

  .product-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: all 0.5s ease;
  }

  .product-card:hover .product-image {
    transform: scale(1.05);
  }

  .product-badge {
    position: absolute;
    top: 10px;
    left: 10px;
    background-color: #ff6b6b;
    color: white;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 600;
    z-index: 1;
  }

  .product-wishlist {
    position: absolute;
    top: 10px;
    right: 10px;
    background-color: white;
    color: #555;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 1;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
  }

  .product-wishlist:hover {
    color: #ff6b6b;
    transform: scale(1.1);
  }

  .product-details {
    padding: 15px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
  }

  .product-name {
    font-size: 16px;
    font-weight: 600;
    color: #333;
    margin-bottom: 8px;
    line-height: 1.4;
  }

  .product-description {
    font-size: 14px;
    color: #777;
    margin-bottom: 15px;
    line-height: 1.5;
    flex-grow: 1;
  }

  .product-price {
    font-size: 18px;
    font-weight: 700;
    color: #3E454C;
    margin-bottom: 15px;
  }

  .product-rating {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
  }

  .rating-stars {
    color: #ffc107;
    margin-right: 5px;
  }

  .rating-count {
    font-size: 12px;
    color: #777;
  }

  /* Product options */
  .product-options {
    background-color: white;
    padding: 15px;
    border-top: 1px solid #eee;
    transition: all 0.3s ease;
  }

  .option-group {
    margin-bottom: 15px;
  }

  .option-label {
    display: block;
    font-weight: 600;
    margin-bottom: 8px;
    color: #333;
    font-size: 14px;
  }

  .size-options {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    margin-bottom: 15px;
  }

  .size-option {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid #ddd;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.2s ease;
  }

  .size-option:hover {
    border-color: #96b3ef;
    background-color: #f0f5ff;
  }

  .size-option.selected {
    background-color: #3E454C;
    color: white;
    border-color: #3E454C;
  }

  .quantity-selector {
    display: flex;
    align-items: center;
    width: 120px;
    border: 1px solid #ddd;
    border-radius: 4px;
    overflow: hidden;
  }

  .quantity-btn {
    width: 36px;
    height: 36px;
    background-color: #f5f5f5;
    border: none;
    color: #555;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .quantity-btn:hover {
    background-color: #e5e5e5;
  }

  .quantity-input {
    width: 48px;
    height: 36px;
    text-align: center;
    border: none;
    border-left: 1px solid #ddd;
    border-right: 1px solid #ddd;
    font-size: 14px;
  }

  /* Add to cart button */
  .add-to-cart-btn {
    display: block;
    width: 100%;
    padding: 12px;
    background-color: #3E454C;
    color: white;
    border: none;
    border-radius: 4px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
    text-decoration: none;
  }

  .add-to-cart-btn:hover {
    background-color: #2c3238;
    transform: translateY(-2px);
  }

  .add-to-cart-btn i {
    margin-right: 8px;
  }

  /* Quick view overlay */
  .quick-view-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.7);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
  }

  .quick-view-overlay.active {
    opacity: 1;
    visibility: visible;
  }

  .quick-view-content {
    background-color: white;
    border-radius: 8px;
    max-width: 900px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    padding: 30px;
    position: relative;
    transform: translateY(50px);
    transition: all 0.3s ease;
  }

  .quick-view-overlay.active .quick-view-content {
    transform: translateY(0);
  }

  .quick-view-close {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 30px;
    height: 30px;
    background-color: #f5f5f5;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 1;
    transition: all 0.2s;
  }

  .quick-view-close:hover {
    background-color: #e5e5e5;
  }

  /* Pagination */
  .pagination {
    display: flex;
    justify-content: center;
    margin-top: 30px;
    margin-bottom: 50px;
  }

  .pagination-item {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 5px;
    border-radius: 4px;
    background-color: white;
    color: #555;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }

  .pagination-item:hover, .pagination-item.active {
    background-color: #3E454C;
    color: white;
  }

  /* Responsive adjustments */
  @media (max-width: 991px) {
    .slider-container {
      height: 40vh;
    }
  }

  @media (max-width: 767px) {
    .slider-container {
      height: 30vh;
    }
    
    .products-grid {
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    }
    
    .search-filter-container {
      flex-direction: column;
      align-items: stretch;
    }
    
    .search-box {
      margin-right: 0;
      margin-bottom: 15px;
    }
    
    .filter-options {
      justify-content: space-between;
    }
  }

  @media (max-width: 576px) {
    .products-grid {
      grid-template-columns: 1fr;
    }
    
    .category-tab {
      padding: 8px 15px;
      font-size: 13px;
    }
  }

  /* Animation effects */
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes slideUp {
    from { transform: translateY(30px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }

  .fade-in {
    animation: fadeIn 0.5s ease forwards;
  }

  .slide-up {
    animation: slideUp 0.5s ease forwards;
  }

  /* Product card hover effects */
  .product-card .quick-view-btn {
    position: absolute;
    bottom: -50px;
    left: 50%;
    transform: translateX(-50%);
    background-color: white;
    color: #333;
    padding: 8px 15px;
    border-radius: 4px;
    font-size: 13px;
    font-weight: 600;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    cursor: pointer;
    z-index: 2;
    opacity: 0;
  }

  .product-card:hover .quick-view-btn {
    bottom: 15px;
    opacity: 1;
  }

  .product-card .product-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.2);
    opacity: 0;
    transition: all 0.3s ease;
  }

  .product-card:hover .product-overlay {
    opacity: 1;
  }
</style>

<!-- Hero Slider Section -->
<div class="slider-container">
  <div class="menu">
    <label for="slide-dot-1"></label>
    <label for="slide-dot-2"></label>
    <label for="slide-dot-3"></label>
  </div>

  <input id="slide-dot-1" type="radio" name="slides" checked>
  <div class="slide slide-1">
    <div class="slide-content">
      <h2>Premium Quality Jerseys</h2>
      <p>Discover our collection of high-quality sports jerseys for all ages</p>
      <button class="add-to-cart-btn" style="max-width: 200px; margin: 15px auto 0;">Shop Now</button>
    </div>
  </div>

  <input id="slide-dot-2" type="radio" name="slides">
  <div class="slide slide-2">
    <div class="slide-content">
      <h2>New Arrivals</h2>
      <p>Check out our latest collection of team jerseys</p>
      <button class="add-to-cart-btn" style="max-width: 200px; margin: 15px auto 0;">Explore</button>
    </div>
  </div>

  <input id="slide-dot-3" type="radio" name="slides">
  <div class="slide slide-3">
    <div class="slide-content">
      <h2>Special Offers</h2>
      <p>Limited time discounts on selected items</p>
      <button class="add-to-cart-btn" style="max-width: 200px; margin: 15px auto 0;">View Deals</button>
    </div>
  </div>
</div>

<!-- Category Tabs -->
<div class="container">
  <div class="category-tabs">
    <div class="category-tab active" data-category="all">All Products</div>
    <div class="category-tab" data-category="elementary">Elementary</div>
    <div class="category-tab" data-category="boys">Boys</div>
    <div class="category-tab" data-category="girls">Girls</div>
    <div class="category-tab" data-category="adults">Adults</div>
  </div>

  <!-- Search and Filter Bar -->
  <div class="search-filter-container">
    <div class="search-box">
      <i class="fa fa-search"></i>
      <input type="text" placeholder="Search products...">
    </div>
    <div class="filter-options">
      <span class="filter-label">Sort by:</span>
      <select class="filter-select">
        <option value="featured">Featured</option>
        <option value="price-low">Price: Low to High</option>
        <option value="price-high">Price: High to Low</option>
        <option value="newest">Newest</option>
      </select>
      
      <span class="filter-label">Filter:</span>
      <select class="filter-select">
        <option value="all">All Sizes</option>
        <option value="xs">XS</option>
        <option value="s">S</option>
        <option value="m">M</option>
        <option value="l">L</option>
        <option value="xl">XL</option>
      </select>
    </div>
  </div>

  <!-- Products Grid -->
  {% if products %}
  <h3 class="text-center mb-4" style="color:#3E454C; font-weight: 600;">{{ word }}</h3>
  
  <div class="products-grid">
    {% for p in products %}
    <div class="product-card" data-category="all">
      <div class="product-badge">New</div>
      <div class="product-wishlist"><i class="fa fa-heart-o"></i></div>
      
      <div class="product-image-container">
        <img class="product-image" src="{% static p.product_image.url %}" alt="{{ p.name }}">
        <div class="product-overlay"></div>
        <div class="quick-view-btn" onclick="openQuickView('{{ p.id }}')">Quick View</div>
      </div>
      
      <div class="product-details">
        <h3 class="product-name">{{ p.name }}</h3>
        <p class="product-description">{{ p.description|truncatechars:60 }}</p>
        
        <div class="product-rating">
          <div class="rating-stars">
            <i class="fa fa-star"></i>
            <i class="fa fa-star"></i>
            <i class="fa fa-star"></i>
            <i class="fa fa-star"></i>
            <i class="fa fa-star-half-o"></i>
          </div>
          <span class="rating-count">(24)</span>
        </div>
        
        <div class="product-price">₱{{ p.price }}</div>
      </div>
      
      <div class="product-options">
        <form class="add-to-cart-form" method="post" action="{% url 'add-to-cart' p.id %}">
          {% csrf_token %}
          <input type="hidden" name="next_page" value="{{ request.path }}">
          
          <div class="option-group">
            <label class="option-label">Size:</label>
            <div class="size-options">
              <div class="size-option" onclick="selectSize(this, 'XS', {{ p.id }})">XS</div>
              <div class="size-option" onclick="selectSize(this, 'S', {{ p.id }})">S</div>
              <div class="size-option selected" onclick="selectSize(this, 'M', {{ p.id }})">M</div>
              <div class="size-option" onclick="selectSize(this, 'L', {{ p.id }})">L</div>
              <div class="size-option" onclick="selectSize(this, 'XL', {{ p.id }})">XL</div>
            </div>
            <input type="hidden" name="size" id="size-input-{{ p.id }}" value="M">
          </div>
          
          <div class="option-group">
            <label class="option-label">Quantity:</label>
            <div class="quantity-selector">
              <button type="button" class="quantity-btn" onclick="decrementQuantity({{ p.id }})">-</button>
              <input type="number" name="quantity" id="quantity-input-{{ p.id }}" class="quantity-input" value="1" min="1" max="10">
              <button type="button" class="quantity-btn" onclick="incrementQuantity({{ p.id }})">+</button>
            </div>
          </div>
          
          <button type="submit" class="add-to-cart-btn">
            <i class="fa fa-shopping-cart"></i> Add to Cart
          </button>
        </form>
      </div>
    </div>
    {% endfor %}
  </div>
  
  <!-- Pagination -->
  <div class="pagination">
    <div class="pagination-item"><i class="fa fa-angle-left"></i></div>
    <div class="pagination-item active">1</div>
    <div class="pagination-item">2</div>
    <div class="pagination-item">3</div>
    <div class="pagination-item"><i class="fa fa-angle-right"></i></div>
  </div>
  
  {% else %}
  <div class="text-center py-5">
    <i class="fa fa-search fa-4x mb-3 text-muted"></i>
    <h3 style="color:#3E454C;">No Products Found</h3>
    <p class="text-muted">Try adjusting your search or filter to find what you're looking for.</p>
  </div>
  {% endif %}
</div>

<!-- Quick View Modal -->
<div class="quick-view-overlay" id="quickViewModal">
  <div class="quick-view-content">
    <div class="quick-view-close" onclick="closeQuickView()">
      <i class="fa fa-times"></i>
    </div>
    <div id="quickViewContent">
      <!-- Content will be loaded dynamically -->
    </div>
  </div>
</div>

<script>
  {% if messages %}
  {% for message in messages %}
  // Replace alert with a nicer notification
  showNotification('{{ message }}');
  {% endfor %}
  {% endif %}

  // Functions for size and quantity selectors
  function selectSize(element, size, productId) {
    // Remove selected class from all size options in the same container
    const container = element.closest('.size-options');
    const options = container.querySelectorAll('.size-option');
    options.forEach(option => option.classList.remove('selected'));
    
    // Add selected class to clicked element
    element.classList.add('selected');
    
    // Update the hidden input value
    document.getElementById('size-input-' + productId).value = size;
  }

  function incrementQuantity(productId) {
    const input = document.getElementById('quantity-input-' + productId);
    const currentValue = parseInt(input.value);
    if (currentValue < 10) {
      input.value = currentValue + 1;
    }
  }

  function decrementQuantity(productId) {
    const input = document.getElementById('quantity-input-' + productId);
    const currentValue = parseInt(input.value);
    if (currentValue > 1) {
      input.value = currentValue - 1;
    }
  }
  
  // Category tabs functionality
  document.addEventListener('DOMContentLoaded', function() {
    const categoryTabs = document.querySelectorAll('.category-tab');
    const productCards = document.querySelectorAll('.product-card');
    
    categoryTabs.forEach(tab => {
      tab.addEventListener('click', function() {
        // Remove active class from all tabs
        categoryTabs.forEach(t => t.classList.remove('active'));
        
        // Add active class to clicked tab
        this.classList.add('active');
        
        const category = this.dataset.category;
        
        // Show/hide products based on category
        productCards.forEach(card => {
          if (category === 'all' || card.dataset.category === category) {
            card.style.display = 'block';
            // Add animation
            card.classList.add('fade-in');
            setTimeout(() => {
              card.classList.remove('fade-in');
            }, 500);
          } else {
            card.style.display = 'none';
          }
        });
      });
    });
  });
  
  // Quick view functionality
  function openQuickView(productId) {
    const modal = document.getElementById('quickViewModal');
    const content = document.getElementById('quickViewContent');
    
    // Here you would typically load the product details via AJAX
    // For now, we'll just show a placeholder
    content.innerHTML = `
      <div class="row">
        <div class="col-md-6">
          <img src="${document.querySelector(`.product-card[data-product-id="${productId}"] .product-image`).src}" 
               alt="Product Image" class="img-fluid">
        </div>
        <div class="col-md-6">
          <h2>${document.querySelector(`.product-card[data-product-id="${productId}"] .product-name`).textContent}</h2>
          <div class="product-rating mb-3">
            <div class="rating-stars">
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star-half-o"></i>
            </div>
            <span class="rating-count">(24 reviews)</span>
          </div>
          <p class="product-price mb-3">₱${document.querySelector(`.product-card[data-product-id="${productId}"] .product-price`).textContent}</p>
          <p class="mb-4">${document.querySelector(`.product-card[data-product-id="${productId}"] .product-description`).textContent}</p>
          
          <!-- Quick view form would go here -->
          <form class="add-to-cart-form" method="post" action="/add-to-cart/${productId}/">
            {% csrf_token %}
            <input type="hidden" name="next_page" value="{{ request.path }}">
            
            <div class="option-group">
              <label class="option-label">Size:</label>
              <div class="size-options">
                <div class="size-option">XS</div>
                <div class="size-option">S</div>
                <div class="size-option selected">M</div>
                <div class="size-option">L</div>
                <div class="size-option">XL</div>
              </div>
              <input type="hidden" name="size" id="quick-size-input" value="M">
            </div>
            
            <div class="option-group">
              <label class="option-label">Quantity:</label>
              <div class="quantity-selector">
                <button type="button" class="quantity-btn">-</button>
                <input type="number" name="quantity" class="quantity-input" value="1" min="1" max="10">
                <button type="button" class="quantity-btn">+</button>
              </div>
            </div>
            
            <button type="submit" class="add-to-cart-btn">
              <i class="fa fa-shopping-cart"></i> Add to Cart
            </button>
          </form>
        </div>
      </div>
    `;
    
    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
  }
  
  function closeQuickView() {
    const modal = document.getElementById('quickViewModal');
    modal.classList.remove('active');
    document.body.style.overflow = '';
  }
  
  // Nice notification instead of alert
  function showNotification(message) {
    // Create notification element
    const notification = document.createElement('div');
    notification.style.position = 'fixed';
    notification.style.top = '20px';
    notification.style.right = '20px';
    notification.style.backgroundColor = '#3E454C';
    notification.style.color = 'white';
    notification.style.padding = '15px 25px';
    notification.style.borderRadius = '4px';
    notification.style.boxShadow = '0 4px 8px rgba(0,0,0,0.2)';
    notification.style.zIndex = '9999';
    notification.style.transform = 'translateX(100%)';
    notification.style.opacity = '0';
    notification.style.transition = 'all 0.3s ease';
    notification.innerHTML = `
      <div style="display: flex; align-items: center;">
        <i class="fa fa-check-circle" style="margin-right: 10px; font-size: 20px;"></i>
        <span>${message}</span>
      </div>
    `;
    
    // Add to DOM
    document.body.appendChild(notification);
    
    // Trigger animation
    setTimeout(() => {
      notification.style.transform = 'translateX(0)';
      notification.style.opacity = '1';
    }, 100);
    
    // Remove after 5 seconds
    setTimeout(() => {
      notification.style.transform = 'translateX(100%)';
      notification.style.opacity = '0';
      setTimeout(() => {
        document.body.removeChild(notification);
      }, 300);
    }, 5000);
  }
  
  // Search functionality
  document.querySelector('.search-box input').addEventListener('input', function() {
    const searchTerm = this.value.toLowerCase();
    const productCards = document.querySelectorAll('.product-card');
    
    productCards.forEach(card => {
      const productName = card.querySelector('.product-name').textContent.toLowerCase();
      const productDesc = card.querySelector('.product-description').textContent.toLowerCase();
      
      if (productName.includes(searchTerm) || productDesc.includes(searchTerm)) {
        card.style.display = 'block';
      } else {
        card.style.display = 'none';
      }
    });
  });
  
  // Sort functionality
  document.querySelector('.filter-select').addEventListener('change', function() {
    const sortValue = this.value;
    const productsGrid = document.querySelector('.products-grid');
    const productCards = Array.from(document.querySelectorAll('.product-card'));
    
    // Sort products based on selected option
    productCards.sort((a, b) => {
      const priceA = parseFloat(a.querySelector('.product-price').textContent.replace('₱', ''));
      const priceB = parseFloat(b.querySelector('.product-price').textContent.replace('₱', ''));
      
      if (sortValue === 'price-low') {
        return priceA - priceB;
      } else if (sortValue === 'price-high') {
        return priceB - priceA;
      }
      
      // Default to original order for 'featured' and 'newest'
      return 0;
    });
    
    // Re-append sorted products
    productCards.forEach(card => {
      productsGrid.appendChild(card);
    });
  });
</script>
{% endblock content %}