<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GearCraftWorks | Customize</title>
    <style> 

/* Reset some default styles */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Helvetica Neue', Arial, sans-serif;
    line-height: 1.6;
    color: #333;
    background-color: #f8f9fa; /* Light background */
    display: flex;
    flex-direction: column;
    align-items: center; /* Centering horizontally */
}

/* Header Styles */
header {
    background: #fff; /* Light background */
    color: #333; /* Dark text */
    padding: 10px 0;
    width: 100%;
    text-align: left; /* Align title to the left */
    font-weight: bold;
}

/* Navigation Styles */
nav {
    background: #fff; /* Match header background */
    color: #333; /* Darker text */
    display: flex;
    justify-content: flex-end; /* Align to the right */
    padding: 5px 5px;
    width: 70%; /* Make nav full width */
    box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1); /* Soft shadow */
}

/* Main navigation bar container */
.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    background-color: #ffffff; /* Adjust to match background */
    border-bottom: 1px solid #e0e0e0;
}

/* Main navigation bar container */
.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    background-color: #ffffff; /* Adjust to match background */
    border-bottom: 1px solid #e0e0e0;
    list-style-type: none; /* Remove bullet points */
}

/* Logo or Title on the left */
.navbar .logo {
    font-size: 20px;
    font-weight: bold;
    color: #0000ff; /* Blue color for the title */
    text-decoration: none;
}

/* Style for the header title */
.header-title {
    color: #0000ff; /* Blue color for the title */
    font-size: 24px; /* Adjust the size as needed */
    font-weight: bold; /* Makes the title bold */
    text-align: left; /* Align text to the left */
    padding-left: 320px; /* Adjust the value to move the title to the right */
    padding-top: 20px; /* Pushes the title down */
}


/* Navigation links on the right */
.navbar .nav-links {
    display: flex;
    gap: 15px;
}

.navbar .nav-item {
    list-style: none;
}

.navbar .nav-link {
    text-decoration: none;
    font-size: 16px;
    color: #555555; /* Gray color for links */
    font-weight: 500;
}

.navbar .nav-link:hover {
    color: #000000; /* Darker color on hover */
}



/* Remove list styling for navigation */
nav ul {
    list-style-type: none; /* Remove bullets */
    margin: 0;
    padding: 0;
    display: flex;
}

nav ul li {
    margin-left: 10px; /* Add spacing between links */
}

nav a {
    color: #555555; /* Darker text */
    text-decoration: none;
    padding: 5px 10px;
    transition: background 0.3s;
    font-weight: bold;
}

nav a:hover {
    background: #f0f0f0; /* Light gray on hover */
    border-radius: 5px; /* Rounded hover effect */
}

/* T-Shirt Div Styles */
#tshirt-div {
    width: 452px; /* Fixed width to match the T-shirt image */
    height: 548px; /* Fixed height to match the T-shirt image */
    background-color: #fff;
    position: relative;
    margin: 20px auto; /* Centering the div */
    border: 1px solid #ccc; /* Optional border for visibility */
    border-radius: 8px; /* Rounded corners */
    overflow: hidden; /* Hide overflow for better appearance */
}

#tshirt-backgroundpicture {
    width: 100%; /* Make the T-shirt image responsive */
    height: auto; /* Maintain aspect ratio */
}

/* Drawing Area Styles */
.drawing-area {
    position: absolute; /* Position relative to the parent */
    top: 0; /* Align with the top of the T-shirt */
    left: 0; /* Align with the left of the T-shirt */
    width: 100%; /* Full width of parent */
    height: 100%; /* Full height of parent */
    z-index: 10; /* Ensure it sits above the T-shirt image */
}

.canvas-container {
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    display: flex; /* Use flexbox to center */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
}

#tshirt-canvas {
    width: 100%; /* Use full width of the container */
    height: 100%; /* Use full height of the container */
    border: 1px solid #ccc; /* Optional border for visibility */
}

/* Button Styles */
button {
    background: #007bff; /* Primary button color */
    color: white;
    border: none;
    border-radius: 5px;
    padding: 10px 20px;
    cursor: pointer;
    transition: background 0.3s;
}

button:hover {
    background: #0056b3; /* Darker hover color */
}

/* Form Element Styles */
label {
    display: block; /* Block level for labels */
    margin-top: 10px;
}

input, select {
    width: calc(100% - 20px); /* Full width inputs */
    padding: 10px;
    margin-top: 5px;
    border: 1px solid #ccc; /* Border for inputs */
    border-radius: 5px; /* Rounded corners */
}

/* Utility Classes */
.text-center {
    text-align: center; /* Center text utility */
}

/* Media Queries for Responsiveness */
@media (max-width: 768px) {
    #tshirt-div {
        width: 95%; /* Adjust width for smaller screens */
    }
}
    </style>
</head>
<body>
    <header>
        <h1 class="header-title">WorksTeamWear</h1>
    </header>
    <nav class="navbar-brand">
        <ul class="nav-links">
            <li><a href="{% url 'home' %}">Home</a></li>
            <li><a href="#">Pre-order now!</a></li>
            <li><a href="{% url 'create' %}">Create</a></li>
            <li><a href="#">About Us</a></li>
        </ul>
        <ul style="float: right; margin-right: 20px;">
            <li><a href="{% url 'logout' %}">Logout</a></li>
        </ul>
    </nav>
    
    <div id="tshirt-div">
        <img id="tshirt-backgroundpicture" src="https://ourcodeworld.com/public-media/gallery/gallery-5d5afd3f1c7d6.png"/>
        <div id="drawingArea" class="drawing-area">					
            <div class="canvas-container">
                <canvas id="tshirt-canvas" width="200" height="400"></canvas>
            </div>
        </div>
    </div>
    <div class="functions">
        <p>Remove your Uploaded image by clicking the <kbd>DEL</kbd> key.</p>
        
        <!-- T-shirt Color Selector -->
        <label for="tshirt-color">T-Shirt Color:</label>
        <select id="tshirt-color">
            <option value="#fff">White</option>
            <option value="#000">Black</option>
            <option value="#f00">Red</option>
            <option value="#008000">Green</option>
            <option value="#ff0">Yellow</option>
        </select>
        <br><br>

        <!-- Upload Custom Image -->
        <label for="tshirt-custompicture">Upload your own logo/design:</label>
        <input type="file" id="tshirt-custompicture" />
        <br><br>

        <!-- Text Input and Controls -->
        <label for="text-input">Add Text:</label>
        <input type="text" id="text-input" placeholder="Enter text">
        <button id="add-text-btn">Add Text</button>
        <br><br>

        <!-- Font Selection -->
        <label for="font-select">Font:</label>
        <select id="font-select">
            <option value="Arial">Arial</option>
            <option value="Times New Roman">Times New Roman</option>
            <option value="cursive">Cursive</option>
        </select>
        <br><br>

        <!-- Font Size Selection -->
        <label for="font-size">Font Size:</label>
        <input type="number" id="font-size" value="20">
        <br><br>

        <!-- Brush Size and Paint Mode -->
        <label for="brush-size">Brush Size:</label>
        <input type="number" id="brush-size" value="1">
        <input type="checkbox" id="toggle-paint-mode">Toggle Paint Mode
        <br><br>

        <!-- Brush Color Picker -->
        <label for="brush-color">Brush Color:</label>
        <input type="color" id="brush-color" value="#000000">
        <br><br>

        <!-- Delete Paint Button -->
        <button id="delete-paint-btn">Delete Paint</button>
    </div>

    <!-- Add this button to your HTML -->
    <button id="download-btn">Download Design</button>

    <!-- Scripts -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/fabric.js/3.6.3/fabric.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js'></script>
    <script>
        let canvas = new fabric.Canvas('tshirt-canvas');
let paintMode = false;

function togglePaintMode() {
    paintMode = !paintMode;
    if (paintMode) {
        canvas.isDrawingMode = true;
        updateBrushColor(document.getElementById("brush-color").value);
        canvas.freeDrawingBrush.width = parseInt(document.getElementById("brush-size").value, 10) || 1;
        canvas.selection = false; // Disable object selection in paint mode
    } else {
        canvas.isDrawingMode = false;
        canvas.selection = true; // Enable object selection
    }
}

document.getElementById("toggle-paint-mode").addEventListener("click", function() {
    togglePaintMode();
});

document.getElementById("tshirt-color").addEventListener("change", function(){
    document.getElementById("tshirt-div").style.backgroundColor = this.value;
    if (!paintMode) {
        updateBrushColor(document.getElementById("brush-color").value);
    }
}, false);

document.getElementById("brush-color").addEventListener("input", function() {
    updateBrushColor(this.value);
});

document.getElementById("brush-size").addEventListener("change", function(){
    if (paintMode) {
        canvas.freeDrawingBrush.width = parseInt(this.value, 10) || 1;
    }
}, false);

document.getElementById("delete-paint-btn").addEventListener("click", function() {
    deletePaint();
});

document.getElementById('tshirt-custompicture').addEventListener("change", function(e){
    var reader = new FileReader();
    
    reader.onload = function (event){
        var imgObj = new Image();
        imgObj.src = event.target.result;

        imgObj.onload = function () {
            var img = new fabric.Image(imgObj);

            img.scaleToHeight(300);
            img.scaleToWidth(300); 
            canvas.centerObject(img);
            canvas.add(img);
            canvas.renderAll();
        };
    };

    if(e.target.files[0]){
        reader.readAsDataURL(e.target.files[0]);
    }
}, false);

document.addEventListener("keydown", function(e) {
    var keyCode = e.keyCode;

    if(keyCode == 46){
        console.log("Removing selected element on Fabric.js on DELETE key !");
        canvas.remove(canvas.getActiveObject());
    }
}, false);

document.getElementById('add-text-btn').addEventListener('click', function() {
    var textInput = document.getElementById('text-input').value.trim(); // Trim to remove spaces
    if (!textInput) {
        alert('Please enter text to add.');
        return; // Stop if input is empty
    }

    var font = document.getElementById('font-select').value || 'Arial'; // Default to Arial if empty
    var fontSize = parseInt(document.getElementById('font-size').value, 10) || 20; // Default to 20
    var textColor = document.getElementById('text-color').value || '#000000'; // Default to black

    var text = new fabric.Text(textInput, {
        fontFamily: font,
        fontSize: fontSize,
        fill: textColor,
        left: 100,
        top: 100
    });

    canvas.add(text);
    canvas.renderAll();
});


// Update color of selected text object
document.getElementById("text-color").addEventListener("input", function() {
    var activeObject = canvas.getActiveObject();
    if (activeObject && activeObject.type === 'text') {
        activeObject.set("fill", this.value); // Update color of selected text
        canvas.renderAll();
    }
});

function updateBrushColor(color) {
    canvas.freeDrawingBrush.color = color;
}

function deletePaint() {
    var objects = canvas.getObjects();
    var paintObjects = objects.filter(function(obj) {
        return obj.type === 'path';
    });
    paintObjects.forEach(function(obj) {
        canvas.remove(obj);
    });
    canvas.renderAll();
}
// Add this script to your JavaScript code
document.getElementById('download-btn').addEventListener('click', function() {
    var canvas = document.getElementById('tshirt-canvas');
    var dataUrl = canvas.toDataURL();
    var link = document.createElement('a');
    link.download = 'tshirt-design.png';
    link.href = dataUrl;
    link.click();
});
    </script>
</body>
</html> 